{"changed":true,"filter":false,"title":"hotel-search-cust.php","tooltip":"/=backupfile/require/search/hotel-search-cust.php","value":"<?php\nif (isset($_POST['submit'])) {\n    $num = 0;\n    if (strlen($_POST['MobileNo']) > 0 and strlen($_POST['Surname']) > 0) {\n        extract($_POST);\n        $sql = \" select * from customer where MobileNo = '$MobileNo' and Surname = '$Surname'\";\n        $rs = mysqli_query($conn, $sql) or die(mysqli_error($conn));\n        $num = mysqli_num_rows($rs);\n        if (mysqli_num_rows($rs) == 1) {\n            $rc = mysqli_fetch_assoc($rs);\n            extract($rc);\n        }\n    } else if (strlen($_POST['Surname']) > 0) {\n        extract($_POST);\n        $sql = \" select * from customer where Surname = '$Surname' \";\n        $rs = mysqli_query($conn, $sql) or die(mysqli_error($conn));\n        $num = mysqli_num_rows($rs);\n        \n    } else if (strlen($_POST['MobileNo']) > 0) {\n        extract($_POST);\n        $sql = \" select * from customer where MobileNo = '$MobileNo' \";\n        $rs = mysqli_query($conn, $sql) or die(mysqli_error($conn));\n        $num = mysqli_num_rows($rs);\n        if (mysqli_num_rows($rs) == 1) {\n            $rc = mysqli_fetch_assoc($rs);\n            extract($rc);\n        }\n        \n    }\n}\n\n?>\n<div class=\"span6\">\n  <div class=\"widget\">\n    <div class=\"widget-header\"> \n      <i class=\"icon-search\">\n      </i>\n      <h3>Search Customer's Hotel Booking\n      </h3>\n    </div>\n    <!-- /widget-header -->\n    <div class=\"widget-content\">\n      <form id=\"edit-profile\" class=\"form-horizontal\" method=\"post\" action=\"\">\n        <fieldset>\n          <div class=\"control-group\">\n            <label class=\"control-label\" for=\"Surname\">Surname\n            </label>\n            <div class=\"controls\">\n              <input list=\"type\" id=\"Surname\" name=\"Surname\">\n              <datalist id=\"type\">\n                <?php \n                  $sql = \"Select DISTINCT(Surname) from customer\" ;\n                  $rsc = mysqli_query($conn, $sql) or die(mysqli_error($conn)); \n                  while($rcs = mysqli_fetch_assoc($rsc)){ \n                ?>\n                <option value=\"<?php print $rcs['Surname']; ?>\">\n                  <?php } ?>\n              </datalist>\n            </div>\n            <!-- /controls -->\n          </div>\n          <!-- /control-group -->\n          <div class=\"control-group\">\n            <label class=\"control-label\" for=\"MobileNo\">Mobile No.\n            </label>\n            <div class=\"controls\">\n              <input type=\"tel\" id=\"MobileNo\" name=\"MobileNo\" pattern=\"[0-9]{8}\" title=\"Please enter a valid telephone number. e.g. 23456789\">\n            </div>\n            <!-- /controls -->\n          </div>\n          <!-- /control-group -->\n          <div class=\"form-actions\">\n            <button type=\"submit\" class=\"btn btn-primary\" name=\"submit\">Search\n            </button>\n            <button class=\"btn\">Cancel\n            </button>\n          </div>\n          <!-- /form-actions -->\n        </fieldset>\n      </form>\n    </div>\n    <!-- /widget-content -->\n  </div>\n</div>\n<div class=\"span6\">\n  <div class=\"widget widget-table action-table\">\n    <div class=\"widget-header\"> \n      <i class=\"icon-list\">\n      </i>\n      <h3>Result of Searching\n      </h3>\n    </div>\n    <!-- /widget-header -->\n    <div class=\"widget-content\">\n      <?php\n      \tif(isset($_POST['submit'])){\n      ?>\n      <div class=\"alert alert-success\">\n        <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;\n        </button>\n        <?= \"There are \".$num.\" customer(s) that match your selection criteria.\"; ?>\n      </div>\n      <?php } ?>\n      <table class=\"table table-striped table-bordered\">\n        <thead>\n          <tr>\n            <th> Customer ID \n            </th>\n            <th> Surname \n            </th>\n            <th> Mobile No. \n            </th>\n            <th> BookingID \n            </th>\n            <th> Check-IN\n            </th>\n            <th> Check-OUT \n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <?php\n          if(strlen($_POST['Surname']) > 0 and strlen($_POST['MobileNo']) == 0){\n            while($rc = mysqli_fetch_assoc($rs)){ \n              extract($rc);\n              $sql = \" select * from hotelbooking where CustID = '$CustID' \" ;\n              $rsh = mysqli_query($conn, $sql) or die(mysqli_error($conn));\n              while($rch = mysqli_fetch_assoc($rsh)){\n          ?>\n          <tr>\n            <td>\n              <?php print $CustID; ?> \n            </td>\n            <td>\n              <?php print $Surname; ?> \n            </td>\n            <td>\n              <?php print $MobileNo; ?> \n            </td>\n            <td>\n              <?php print $rch[ 'BookingID']; ?> \n            </td>\n            <td>\n              <?php print $rch[ 'Checkin']; ?> \n            </td>\n            <td>\n              <?php print $rch[ 'Checkout']; ?> \n            </td>\n          </tr>\n          <?php } } } else { ?>\n          <?php\n            $sql = \" select * from hotelbooking where CustID = '$CustID' \" ;\n            $rs = mysqli_query($conn, $sql) or die(mysqli_error($conn));\n            while($rc = mysqli_fetch_assoc($rs)){\n          ?>\n          <tr>\n            <td>\n              <?php print $CustID; ?> \n            </td>\n            <td>\n              <?php print $Surname; ?> \n            </td>\n            <td>\n              <?php print $MobileNo; ?> \n            </td>\n            <td>\n              <?php print $rc[ 'BookingID']; ?> \n            </td>\n            <td>\n              <?php print $rc[ 'Checkin']; ?> \n            </td>\n            <td>\n              <?php print $rc[ 'Checkout']; ?> \n            </td>\n          </tr>\n          <?php } } ?>\n        </tbody>\n      </table>\n    </div>\n    <!-- /widget-content -->\n  </div>\n  <!-- /widget -->\n</div>\n<!-- /span6 -->\n","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":11,"column":14},"end":{"row":11,"column":15},"action":"remove","lines":["R"],"id":467,"ignore":true}],[{"start":{"row":11,"column":14},"end":{"row":11,"column":15},"action":"insert","lines":["C"],"id":468,"ignore":true}],[{"start":{"row":11,"column":15},"end":{"row":11,"column":16},"action":"insert","lines":["R"],"id":469,"ignore":true}],[{"start":{"row":11,"column":15},"end":{"row":11,"column":16},"action":"remove","lines":["R"],"id":470,"ignore":true}],[{"start":{"row":11,"column":14},"end":{"row":11,"column":15},"action":"remove","lines":["C"],"id":471,"ignore":true}],[{"start":{"row":11,"column":14},"end":{"row":11,"column":17},"action":"insert","lines":["ARC"],"id":472,"ignore":true}],[{"start":{"row":11,"column":17},"end":{"row":11,"column":18},"action":"insert","lines":["H"],"id":473,"ignore":true}],[{"start":{"row":11,"column":18},"end":{"row":11,"column":21},"action":"insert","lines":[" 竹人"],"id":474,"ignore":true}],[{"start":{"row":11,"column":19},"end":{"row":11,"column":21},"action":"remove","lines":["竹人"],"id":475,"ignore":true},{"start":{"row":11,"column":19},"end":{"row":11,"column":20},"action":"insert","lines":["媭"]}],[{"start":{"row":11,"column":19},"end":{"row":11,"column":20},"action":"remove","lines":["媭"],"id":476,"ignore":true}],[{"start":{"row":11,"column":19},"end":{"row":11,"column":20},"action":"insert","lines":["後"],"id":477,"ignore":true}],[{"start":{"row":11,"column":20},"end":{"row":11,"column":23},"action":"insert","lines":["卜火戈"],"id":478,"ignore":true}],[{"start":{"row":11,"column":20},"end":{"row":11,"column":23},"action":"remove","lines":["卜火戈"],"id":479,"ignore":true},{"start":{"row":11,"column":20},"end":{"row":11,"column":21},"action":"insert","lines":["就"]}],[{"start":{"row":11,"column":21},"end":{"row":11,"column":22},"action":"insert","lines":["山"],"id":480,"ignore":true}],[{"start":{"row":11,"column":21},"end":{"row":11,"column":22},"action":"remove","lines":["山"],"id":481,"ignore":true},{"start":{"row":11,"column":21},"end":{"row":11,"column":23},"action":"insert","lines":["出水"]}],[{"start":{"row":11,"column":22},"end":{"row":11,"column":23},"action":"remove","lines":["水"],"id":482,"ignore":true}],[{"start":{"row":11,"column":22},"end":{"row":11,"column":24},"action":"insert","lines":["口一"],"id":483,"ignore":true}],[{"start":{"row":11,"column":22},"end":{"row":11,"column":24},"action":"remove","lines":["口一"],"id":484,"ignore":true},{"start":{"row":11,"column":22},"end":{"row":11,"column":25},"action":"insert","lines":["口一金"]}],[{"start":{"row":11,"column":22},"end":{"row":11,"column":25},"action":"remove","lines":["口一金"],"id":485,"ignore":true},{"start":{"row":11,"column":22},"end":{"row":11,"column":23},"action":"insert","lines":["哂"]}],[{"start":{"row":11,"column":23},"end":{"row":11,"column":25},"action":"insert","lines":["竹尸"],"id":486,"ignore":true}],[{"start":{"row":11,"column":23},"end":{"row":11,"column":25},"action":"remove","lines":["竹尸"],"id":487,"ignore":true},{"start":{"row":11,"column":23},"end":{"row":11,"column":26},"action":"insert","lines":["竹尸竹"]}],[{"start":{"row":11,"column":23},"end":{"row":11,"column":26},"action":"remove","lines":["竹尸竹"],"id":488,"ignore":true},{"start":{"row":11,"column":23},"end":{"row":11,"column":25},"action":"insert","lines":["所大"]}],[{"start":{"row":11,"column":24},"end":{"row":11,"column":25},"action":"remove","lines":["大"],"id":489,"ignore":true},{"start":{"row":11,"column":24},"end":{"row":11,"column":25},"action":"insert","lines":["有"]}],[{"start":{"row":11,"column":25},"end":{"row":11,"column":29},"action":"insert","lines":["BOOK"],"id":490,"ignore":true}],[{"start":{"row":11,"column":29},"end":{"row":11,"column":32},"action":"insert","lines":["ING"],"id":491,"ignore":true}],[{"start":{"row":11,"column":32},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":492},{"start":{"row":12,"column":0},"end":{"row":12,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":12,"column":8},"end":{"row":12,"column":9},"action":"insert","lines":["/"],"id":493}],[{"start":{"row":12,"column":9},"end":{"row":12,"column":10},"action":"insert","lines":["/"],"id":494}],[{"start":{"row":12,"column":10},"end":{"row":12,"column":11},"action":"insert","lines":["?"],"id":495}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"insert","lines":[" "],"id":496}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"remove","lines":[" "],"id":497}],[{"start":{"row":12,"column":10},"end":{"row":12,"column":11},"action":"remove","lines":["?"],"id":498}],[{"start":{"row":12,"column":10},"end":{"row":12,"column":11},"action":"insert","lines":[" "],"id":499}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"insert","lines":["?"],"id":500}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"remove","lines":["?"],"id":501}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"insert","lines":["1"],"id":502}],[{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"insert","lines":[" "],"id":503}],[{"start":{"row":12,"column":13},"end":{"row":12,"column":14},"action":"insert","lines":["i"],"id":504}],[{"start":{"row":12,"column":14},"end":{"row":12,"column":15},"action":"insert","lines":["f"],"id":505}],[{"start":{"row":12,"column":15},"end":{"row":12,"column":16},"action":"insert","lines":[" "],"id":506}],[{"start":{"row":12,"column":15},"end":{"row":12,"column":16},"action":"remove","lines":[" "],"id":507}],[{"start":{"row":12,"column":14},"end":{"row":12,"column":15},"action":"remove","lines":["f"],"id":508}],[{"start":{"row":12,"column":13},"end":{"row":12,"column":14},"action":"remove","lines":["i"],"id":509}],[{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"remove","lines":[" "],"id":510}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"remove","lines":["1"],"id":511}],[{"start":{"row":12,"column":10},"end":{"row":12,"column":11},"action":"remove","lines":[" "],"id":512}],[{"start":{"row":12,"column":10},"end":{"row":12,"column":11},"action":"insert","lines":[" "],"id":514}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"insert","lines":["?"],"id":515}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"remove","lines":["?"],"id":516,"ignore":true},{"start":{"row":12,"column":11},"end":{"row":12,"column":13},"action":"insert","lines":["卜竹"]}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":13},"action":"remove","lines":["卜竹"],"id":517,"ignore":true}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":14},"action":"insert","lines":["山一口"],"id":518,"ignore":true}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":14},"action":"remove","lines":["山一口"],"id":519,"ignore":true},{"start":{"row":12,"column":11},"end":{"row":12,"column":16},"action":"insert","lines":["山一口一山"]}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":16},"action":"remove","lines":["山一口一山"],"id":520,"ignore":true},{"start":{"row":12,"column":11},"end":{"row":12,"column":13},"action":"insert","lines":["岩山"]}],[{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"remove","lines":["山"],"id":521,"ignore":true},{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"insert","lines":["岩"]}],[{"start":{"row":12,"column":13},"end":{"row":12,"column":15},"action":"insert","lines":["大月"],"id":522,"ignore":true}],[{"start":{"row":12,"column":13},"end":{"row":12,"column":15},"action":"remove","lines":["大月"],"id":523,"ignore":true},{"start":{"row":12,"column":13},"end":{"row":12,"column":14},"action":"insert","lines":["冇"]}],[{"start":{"row":12,"column":14},"end":{"row":12,"column":16},"action":"insert","lines":["月山"],"id":524,"ignore":true}],[{"start":{"row":12,"column":14},"end":{"row":12,"column":16},"action":"remove","lines":["月山"],"id":525,"ignore":true},{"start":{"row":12,"column":14},"end":{"row":12,"column":15},"action":"insert","lines":["睇"]}],[{"start":{"row":12,"column":15},"end":{"row":12,"column":17},"action":"insert","lines":[", "],"id":526,"ignore":true}],[{"start":{"row":12,"column":17},"end":{"row":12,"column":20},"action":"insert","lines":["卜口廿"],"id":527,"ignore":true}],[{"start":{"row":12,"column":17},"end":{"row":12,"column":20},"action":"remove","lines":["卜口廿"],"id":528,"ignore":true},{"start":{"row":12,"column":17},"end":{"row":12,"column":18},"action":"insert","lines":["講"]}],[{"start":{"row":12,"column":18},"end":{"row":12,"column":19},"action":"insert","lines":["咩"],"id":529,"ignore":true}],[{"start":{"row":12,"column":19},"end":{"row":12,"column":20},"action":"insert","lines":[" "],"id":530}],[{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"insert","lines":["p"],"id":531}],[{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"insert","lines":["h"],"id":532}],[{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"insert","lines":["o"],"id":533}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"insert","lines":["n"],"id":534}],[{"start":{"row":12,"column":24},"end":{"row":12,"column":25},"action":"insert","lines":["e"],"id":535}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":19},"action":"remove","lines":["岩岩冇睇, 講咩"],"id":536,"ignore":true},{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"insert","lines":["交"]}],[{"start":{"row":12,"column":18},"end":{"row":12,"column":19},"action":"insert","lines":[" "],"id":537}],[{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"insert","lines":["左"],"id":538,"ignore":true}],[{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"insert","lines":["o"],"id":539}],[{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"insert","lines":["k"],"id":540}],[{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"insert","lines":["?"],"id":541}],[{"start":{"row":12,"column":13},"end":{"row":12,"column":16},"action":"insert","lines":["AND"],"id":542,"ignore":true}],[{"start":{"row":12,"column":16},"end":{"row":12,"column":20},"action":"insert","lines":["ROID"],"id":543,"ignore":true}],[{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"insert","lines":["十"],"id":544,"ignore":true}],[{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"remove","lines":["十"],"id":545,"ignore":true},{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"insert","lines":["未"]}],[{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"insert","lines":[","],"id":546,"ignore":true}],[{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"insert","lines":["仲"],"id":547,"ignore":true}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"insert","lines":["有"],"id":548,"ignore":true}],[{"start":{"row":12,"column":24},"end":{"row":12,"column":25},"action":"insert","lines":["5"],"id":549,"ignore":true}],[{"start":{"row":12,"column":35},"end":{"row":12,"column":36},"action":"insert","lines":[" "],"id":550}],[{"start":{"row":12,"column":25},"end":{"row":12,"column":29},"action":"insert","lines":["MINS"],"id":551,"ignore":true}],[{"start":{"row":12,"column":40},"end":{"row":12,"column":41},"action":"insert","lines":["y"],"id":552}],[{"start":{"row":12,"column":41},"end":{"row":12,"column":42},"action":"insert","lines":["e"],"id":553}],[{"start":{"row":12,"column":42},"end":{"row":12,"column":43},"action":"insert","lines":["s"],"id":554}],[{"start":{"row":12,"column":43},"end":{"row":12,"column":44},"action":"insert","lines":["."],"id":555}],[{"start":{"row":12,"column":44},"end":{"row":12,"column":45},"action":"insert","lines":["."],"id":556}],[{"start":{"row":12,"column":45},"end":{"row":12,"column":46},"action":"insert","lines":["."],"id":557}],[{"start":{"row":12,"column":11},"end":{"row":12,"column":29},"action":"remove","lines":["交左ANDROID未,仲有5MINS"],"id":558,"ignore":true},{"start":{"row":12,"column":11},"end":{"row":12,"column":12},"action":"insert","lines":["O"]}],[{"start":{"row":12,"column":12},"end":{"row":12,"column":13},"action":"insert","lines":["K"],"id":559,"ignore":true}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":25},"action":"insert","lines":["OK"],"id":560,"ignore":true}],[{"start":{"row":3,"column":39},"end":{"row":3,"column":42},"action":"remove","lines":["and"],"id":561,"ignore":true},{"start":{"row":3,"column":39},"end":{"row":3,"column":40},"action":"insert","lines":["o"]}],[{"start":{"row":3,"column":39},"end":{"row":3,"column":40},"action":"remove","lines":["o"],"id":562,"ignore":true}],[{"start":{"row":3,"column":39},"end":{"row":3,"column":41},"action":"insert","lines":["or"],"id":563,"ignore":true}],[{"start":{"row":3,"column":39},"end":{"row":3,"column":41},"action":"remove","lines":["or"],"id":564,"ignore":true}],[{"start":{"row":3,"column":39},"end":{"row":3,"column":42},"action":"insert","lines":["and"],"id":565,"ignore":true}],[{"start":{"row":31,"column":0},"end":{"row":32,"column":9},"action":"remove","lines":["","// 呢度全部.."],"id":566}],[{"start":{"row":11,"column":10},"end":{"row":12,"column":32},"action":"remove","lines":["//SEARCH 後就出哂所有BOOKING","        // OK phone ok?OK yes..."],"id":567}],[{"start":{"row":11,"column":9},"end":{"row":11,"column":10},"action":"remove","lines":[" "],"id":568}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":29,"column":1},"end":{"row":29,"column":1},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1468170042227}